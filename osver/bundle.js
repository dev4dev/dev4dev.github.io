(()=>{var t={6:(t,e,s)=>{"use strict";s.r(e)}},e={};function s(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,s),o.exports}s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{s(6);class t{file;constructor(t){this.file=t}load(){return new Promise(((t,e)=>{const s=new FileReader;s.onload=function(){t(s.result??""),s.result},s.onerror=function(){e("Some shit happened while reading file")},s.readAsText(this.file)}))}getVersions(t){return new Promise(((e,s)=>{const n=t.split("\n").map((t=>t.trim()));let r=!1,o=[];for(const t of n)if(!t.startsWith("OS with version")||r){if(r){if(""===t)break;o.push(t)}}else r=!0;e(o)}))}parse(){return this.load().then(this.getVersions)}}class e{versions;constructor(t){this.versions=t}parse(){return new Promise(((t,e)=>{this.versions.sort();let s={};for(const t of this.versions){const[e,n]=t.split(","),[r]=e.split(".");if(""===r){console.warn("Empty version: ",t);continue}let o=r.trim(),i=s[o]||0;i+=parseInt(n,10),s[o]=i}let n={};for(const t in s){const[e]=t.split(" ");n[e]||(n[e]={}),n[e][t]=s[t]}t(n)}))}}class n{static format(t){return new Promise(((e,s)=>{let n="";for(const e in t){n+=`<h4>${e}</h4>`;const s=t[e];n+="<table><thead><tr><th>Version</th><th>Count</th></tr></thead>";for(const t in s){const e=s[t];console.log(t,e),n+=`<tr><td class="name">${t}</td><td class="count">${e}</td></tr>`}n+="</table>"}e(n)}))}}const r=document.getElementById("result"),o=document.getElementById("action");o?.addEventListener("click",(async s=>{s.preventDefault(),r.innerText="Processing...";const o=document.getElementById("csv");let i=new t(o.files[0]),a=await i.parse(),l=new e(a),c=await l.parse();r.innerHTML=await n.format(c)}))})()})();
//# sourceMappingURL=bundle.js.map