(()=>{var t={274:t=>{t.exports=function t(e,s){"use strict";var r,n,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,l=/^0/,d=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},m=d(e).replace(a,"")||"",u=d(s).replace(a,"")||"",h=m.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(m.match(c),16)||1!==h.length&&m.match(i)&&Date.parse(m),v=parseInt(u.match(c),16)||f&&u.match(i)&&Date.parse(u)||null;if(v){if(f<v)return-1;if(f>v)return 1}for(var w=0,y=Math.max(h.length,p.length);w<y;w++){if(r=!(h[w]||"").match(l)&&parseFloat(h[w])||h[w]||0,n=!(p[w]||"").match(l)&&parseFloat(p[w])||p[w]||0,isNaN(r)!==isNaN(n))return isNaN(r)?1:-1;if(typeof r!=typeof n&&(r+="",n+=""),r<n)return-1;if(r>n)return 1}return 0}}},e={};function s(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,s),o.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=s(274),e=s.n(t);class r{name;majorName;count;osName;constructor(t,e){this.name=t,this.count=e;const[s]=t.split(".");this.majorName=s;const[r]=this.name.split(" ").map((t=>t.trim()));this.osName=r}static build(t){const[e,s]=t.split(",").map((t=>t.trim()));return""===e?(console.warn("Empty version: ",t),null):new r(e,parseInt(s,10))}}class n{name;versions;total;osName;constructor(t){this.name=t.majorName,this.versions=[],this.total=0,this.osName=t.osName,this.add(t)}add(t){this.versions.push(t),this.total+=t.count}match(t){return this.name==t.majorName}}class o{name;versions;total(){return this.versions.reduce(((t,e)=>t+e.total),0)}constructor(t){this.name=t.osName,this.versions=[],this.add(t)}add(t){this.versions.push(t)}percent(t){return Math.round(t/this.total()*1e4)/100}match(t){return this.name==t.osName}matchVersion(t){return this.name==t.osName}matchName(t){return this.name==t}majorFor(t){return this.versions.find((e=>e.match(t)))}}class a{oses=[];static fromLines(t){const s=new a,r=t.map((t=>t.trim())).filter((t=>""!==t));return r.sort(e()),r.forEach((t=>{s.add(t)})),s}static fromString(t){return a.fromLines(t.split("\n"))}add(t){const e=r.build(t),s=this.osFor(e);if(s){const t=s.majorFor(e);if(t)t.add(e);else{const t=new n(e);s.add(t)}}else{const t=new n(e),s=new o(t);this.oses.push(s)}}osFor(t){return this.oses.find((e=>e.matchVersion(t)))}osForName(t){return this.oses.find((e=>e.matchName(t)))}[Symbol.iterator](){let t=0;return{next:()=>t<this.oses.length?{value:this.oses[t++],done:!1}:{done:!0}}}}class i{file;constructor(t){this.file=t}load(){return new Promise(((t,e)=>{const s=new FileReader;s.onload=function(){t(s.result??""),s.result},s.onerror=function(){e("Some shit happened while reading file")},s.readAsText(this.file)}))}getVersions(t){return new Promise(((e,s)=>{const r=t.split("\n").map((t=>t.trim()));let n=!1,o=[];for(const t of r)if(!t.startsWith("OS with version")||n){if(n){if(""===t)break;o.push(t)}}else n=!0;e(o)}))}parse(){return this.load().then(this.getVersions)}}const c={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let l;const d=new Uint8Array(16);function m(){if(!l&&(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(d)}const u=[];for(let t=0;t<256;++t)u.push((t+256).toString(16).slice(1));const h=function(t,e,s){if(c.randomUUID&&!e&&!t)return c.randomUUID();const r=(t=t||{}).random||(t.rng||m)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){s=s||0;for(let t=0;t<16;++t)e[s+t]=r[t];return e}return function(t,e=0){return(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase()}(r)};class p{versions;constructor(t){this.versions=t}table(t){let e="";for(const s of this.versions){e+=`<h4>${s.name}</h4>`;const r=s.versions;e+='<table><thead><tr><th scope="col">Version</th><th scope="col">Count</th><th scope="col">Percent</th></tr></thead><tbody>';for(const n of r){const r=n.total,o=s.percent(r),a=h();e+=`<tr class="${o<t?"low":""} major-version" data-version="${a}"><td class="name">${n.name}</td><td class="count">${r}</td><td class="percent">${o}%</td></tr>`;for(const r of n.versions){const n=r.count,i=s.percent(n);e+=`<tr class="${o<t?"low":""} minor-version minor-hidden minor-version-${a}"><td class="minor-name">${r.name}</td><td class="count">${n}</td><td class="percent">${i}%</td></tr>`}}e+="</tbody></table>"}return e}}const f=document.getElementById("result"),v=document.getElementById("action"),w=document.getElementById("threshold"),y=document.getElementById("csv");v?.addEventListener("click",(async t=>{t.preventDefault(),0!=y.files.length?await async function(t){f.innerText="Processing...";const e=new i(y.files[0]),s=await e.parse(),r=a.fromLines(s),n=new p(r.oses).table(t);f.innerHTML=n,function(){const t=document.querySelectorAll(".major-version");for(const e of t)e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const e=t.target.closest("tr").dataset.version,s=document.querySelectorAll(`.minor-version-${e}`);for(const t of s){const e=t;e.classList.contains("minor-hidden")?e.classList.remove("minor-hidden"):e.classList.add("minor-hidden")}}))}()}(parseFloat(w.value)):f.innerHTML='<div class="text-danger">Select file!</div>'}))})()})();
//# sourceMappingURL=bundle.js.map