(()=>{var e={228:e=>{e.exports=function e(t,r){"use strict";var n,s,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,l=/^0/,d=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},p=d(t).replace(i,"")||"",u=d(r).replace(i,"")||"",f=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=u.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(p.match(c),16)||1!==f.length&&p.match(a)&&Date.parse(p),w=parseInt(u.match(c),16)||m&&u.match(a)&&Date.parse(u)||null;if(w){if(m<w)return-1;if(m>w)return 1}for(var v=0,g=Math.max(f.length,h.length);v<g;v++){if(n=!(f[v]||"").match(l)&&parseFloat(f[v])||f[v]||0,s=!(h[v]||"").match(l)&&parseFloat(h[v])||h[v]||0,isNaN(n)!==isNaN(s))return isNaN(n)?1:-1;if(typeof n!=typeof s&&(n+="",s+=""),n<s)return-1;if(n>s)return 1}return 0}},327:(e,t,r)=>{"use strict";r.r(t)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{r(327);const e=r(228);class t{file;constructor(e){this.file=e}load(){return new Promise(((e,t)=>{const r=new FileReader;r.onload=function(){e(r.result??""),r.result},r.onerror=function(){t("Some shit happened while reading file")},r.readAsText(this.file)}))}getVersions(e){return new Promise(((t,r)=>{const n=e.split("\n").map((e=>e.trim()));let s=!1,o=[];for(const e of n)if(!e.startsWith("OS with version")||s){if(s){if(""===e)break;o.push(e)}}else s=!0;t(o)}))}parse(){return this.load().then(this.getVersions)}}class n{versions;constructor(e){this.versions=e}parse(){return new Promise(((t,r)=>{this.versions.sort(e);let n={};for(const e of this.versions){const[t,r]=e.split(","),[s]=t.split(".");if(""===s){console.warn("Empty version: ",e);continue}let o=s.trim(),i=n[o]||{count:0,percent:0};i.count+=parseInt(r,10),n[o]=i}let s={};for(const e in n){const[t]=e.split(" ");s[t]||(s[t]={}),s[t][e]=n[e]}for(const e in s){let t=0;for(const r in s[e])t+=s[e][r].count;for(const r in s[e])s[e][r].percent=Math.round(s[e][r].count/t*1e4)/100}t(s)}))}}class s{static format(e,t){return new Promise(((r,n)=>{let s="";for(const r in e){s+=`<h4>${r}</h4>`;const n=e[r];s+='<table><thead><tr><th scope="col">Version</th><th scope="col">Count</th><th scope="col">Percent</th></tr></thead><tbody>';for(const e in n){const r=n[e].count,o=n[e].percent;s+=`<tr class="${o<t?"low":""}"><td class="name">${e}</td><td class="count">${r}</td><td class="percent">${o}%</td></tr>`}s+="</tbody></table>"}r(s)}))}}async function o(e){i.innerText="Processing...";let r=new t(l.files[0]),o=await r.parse(),a=new n(o),c=await a.parse();i.innerHTML=await s.format(c,e)}const i=document.getElementById("result"),a=document.getElementById("action"),c=document.getElementById("threshold"),l=document.getElementById("csv");a?.addEventListener("click",(async e=>{e.preventDefault(),0!=l.files.length?await o(parseFloat(c.value)):i.innerHTML='<div class="text-danger">Select file!</div>'}))})()})();
//# sourceMappingURL=bundle.js.map